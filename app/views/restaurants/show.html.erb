<h1 class="h1-resto"><%= @restaurant.restaurant_name %></h1>

<div class="show-content">
  <section class="menu-img">
    <% if @restaurant.image.attached? %>
      <%= image_tag @restaurant.image, alt: 'Photo du menu du restaurant', class:"image_tag_upld" %>
    <% else %>
      <p class="p-contact"> PAS ENCORE DE MENU </p>
    <% end %>

    <div class="upload-img">
      <% if current_admin == @restaurant.admin %>
          <%= form_tag restaurant_images_path(@restaurant), multipart: true do %>
            <%= file_field_tag :image, class:"btn mt-3 btn-up-show" %>
            <%= submit_tag "TÉLÉCHARGER", class:"btn mt-3 btn-up-show" %>
          <% end %>

          <%= form_with(model: [:id, @restaurant], local: true, url: restaurant_path, method: "delete") do |form| %>
            <%= form.submit "Supprimer", class: "btn mt-3 btn-del-show" %>
          <% end %>
      <% end %>
    </div>
  </section>

  <section class="infos-resto">
    <p class="description">
      Bienvenue chez <%= @restaurant.restaurant_name %> ! Plongez dans une expérience culinaire authentique où les saveurs du Mexique vous transportent instantanément. Dégustez nos délicieux tacos, enchiladas et fajitas, accompagnés de margaritas rafraîchissantes. Notre ambiance vibrante et nos plats savoureux vous promettent une soirée inoubliable. Venez découvrir la vraie essence du Mexique chez nous !
    </p>

    <%= form_with(model: [@restaurant, @reservation], url: restaurant_reservations_path(@restaurant), method: :post) do |form| %>
      <div class="field">
        <%= form.label :date %>
        <%= form.date_field :date, class: "form-control" %>
      </div>
    
      <div class="field">
        <%= form.label "Horaire" %>
        <%= form.time_field :time, class: "form-control" %>
      </div>
    
      <%= form.submit "RÉSERVER UNE TABLE", class: "btn btn-book-show" %>
    <% end %>

    <% if current_user%>
      <p class="p-2"> <%= @restaurant.favorites.count %>  <i class="fas fa-star"></i></p>
      <%= button_to 'Ajouter aux favoris', restaurant_favorites_path(@restaurant), method: :post, class:"btn btn-outline-info btn-sm" %>
    <%end%>

  </section>
</div>

  <section class="show-comments">
    <h2>Commentaires</h2>
      <% @comment.each do |comment| %>
        <div>
          <p><%= comment.body %></p>
          <% if current_user == comment.user %>
            <%= button_to "Supprimer ce commentaire", restaurant_comment_path(@restaurant, comment), method: :delete, class: "btn btn-danger", form: { data: { turbo_confirm: "Are you sure?" } } %>
          <% end %>
        </div>
      <% end %>

    <% if current_user %>
      <h2>Ajoute un nouveau commentaire</h2>
      <%= render partial: "comments/form", locals: { restaurant: @restaurant } %>
    <% end %>
  </section>
